<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Telegram Web App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        html, body {
            padding: 0;
            margin: 0;
            background-color: black;
            color: aliceblue;
        }
    </style>
</head>
<body>
    <h1>Telegram Web App</h1>
    <div id="userId"></div>

    <script>
        console.log('Telegram Web App script started');
        Telegram.WebApp.ready();

        if (Telegram.WebApp.initDataUnsafe) {
            console.log('Telegram Web App initDataUnsafe available');
            const user = Telegram.WebApp.initDataUnsafe.user;
            console.log('User data:', user);

            if (user) {
                document.getElementById('userId').innerText = `User ID: ${user.id}`;
                fetch('/api/save_user_id', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({user_id: user.id}),
                }).then(response => console.log('Data sent:', response))
                  .catch(error => console.error('Error sending data:', error));
            } else {
                document.getElementById('userId').innerText = 'User data not available';
                console.error('User data not available');
            }
        } else {
            document.getElementById('userId').innerText = 'Telegram Web App SDK не инициализирован';
            console.error('Telegram Web App SDK не инициализирован');
        }
    </script>
</body>
</html>
